<!DOCTYPE html>
<html>

<head>
    <style>
        .keywords {
            color: blue;
        }

        .indentifier {
            color: skyblue;
        }

        .punctuator {
            color: blueviolet;
        }
    </style>
</head>

<body>
    <pre id="container">

    </pre>
</body>

<script>
    let source = `
    function sleep(t) {
      return new Promise(function(resolve){
        setTimeout(resolve, t)
      });
    }
    `
    /**
     * | 或
     * [] 方括号内的任意字符
     * () 组合
     * (?:) 只组合不记忆
     * 
    */
    let regexp = /(function|new|return)|([ \t\n\r]+)|([a-zA-Z][a-zA-Z0-9]*)|([\(\)\{\}\,\;])/g

    let dictionary = ["keywords", "whitespace", "indentifier", "punctuator"]

    let token = null
    let lastIndex = 0

    let container = document.getElementById('container')

    do {
        lastIndex = regexp.lastIndex
        token = regexp.exec(source)
        if (!token) break
        let text = document.createElement('span')
        text.textContent = token[0]

        console.log(regexp.lastIndex)
        for (let i = 1; i < 5; i++) {
            if (token[i]) {
                text.classList.add(dictionary[i - 1])
                // console.log(dictionary[i - 1], token[0])
            }
        }

        container.appendChild(text)
    } while (token) 
</script>

</html>